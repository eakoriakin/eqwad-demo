{"version":3,"sources":["eqwad-combo-box.component.ts"],"names":[],"mappings":"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","file":"eqwad-combo-box.component.js","sourcesContent":["import { Component, Input, Output, ViewChild, Renderer, OnDestroy, EventEmitter } from 'angular2/core';\r\nimport { EqwadComboBoxFilter } from './eqwad-combo-box-filter.pipe';\r\n\r\n@Component({\r\n    selector: 'eq-combo-box',\r\n    pipes: [EqwadComboBoxFilter],\r\n    template: `\r\n        <div class=\"eq-combo-box\" #comboBoxElement\r\n            [ngClass]=\"{ 'eq-combo-box_is-opened': _isOpened, 'eq-combo-box_is-focused': _isFocused }\"\r\n            (mouseenter)=\"_mouseenter()\"\r\n            (mouseleave)=\"_mouseleave()\">\r\n            <div class=\"eq-combo-box__wrapper\">\r\n                <input class=\"eq-combo-box__text\" #textElement\r\n                    type=\"text\"\r\n                    autocomplete=\"off\"\r\n                    [(ngModel)]=\"text\"\r\n                    [placeholder]=\"placeholder\"/>\r\n                <div class=\"eq-combo-box__open\" (click)=\"_open()\">\r\n                    <i class=\"fa fa-caret-down\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"eq-combo-box-list\" #listElement\r\n            [ngClass]=\"{ 'eq-combo-box-list_is-opened': _isOpened, 'eq-combo-box-list_is-focused': _isFocused }\"\r\n            (mouseenter)=\"_mouseenter()\"\r\n            (mouseleave)=\"_mouseleave()\">\r\n            <div class=\"eq-combo-box-list__item\"\r\n                *ngFor=\"let item of (items | eqwadComboBoxFilter:itemTextField:text)\"\r\n                (click)=\"_select(item, $event)\">\r\n                {{item[itemTextField]}}\r\n            </div>\r\n        </div>\r\n    `\r\n})\r\n\r\nexport class EqwadComboBox implements OnDestroy {\r\n    @Input() itemValueField: string;\r\n    @Input() itemTextField: string;\r\n    @Input() items: Array<Object> = [];\r\n    @Input() placeholder: string = '';\r\n\r\n    @Output() onSelect: EventEmitter<any> = new EventEmitter();\r\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\r\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ViewChild('comboBoxElement') private comboBoxElement: any;\r\n    @ViewChild('listElement') private listElement: any;\r\n    @ViewChild('textElement') private textElement: any;\r\n\r\n    value: Array<Object> = [];\r\n\r\n    private text = '';\r\n    private _isOpened = false;\r\n    private _isFocused = false;\r\n    private _isHovered = false;\r\n    private _documentClickListener: Function;\r\n\r\n    constructor(renderer: Renderer) {\r\n        this._documentClickListener = renderer.listenGlobal('document', 'click', (event: any) => {\r\n            // Close list if user clicks outside.\r\n            if (!this._isHovered && this._isOpened) {\r\n                this._close();\r\n            }\r\n\r\n            if (!this._isHovered && this._isFocused) {\r\n                this._isFocused = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        // Remove listeners.\r\n        this._documentClickListener();\r\n    }\r\n\r\n    open() {\r\n        this._positionList();\r\n        this._isOpened = true;\r\n    }\r\n\r\n    close() {\r\n        this._isOpened = false;\r\n    }\r\n\r\n    private _open() {\r\n        this._isOpened = !this._isOpened;\r\n\r\n        if (this._isOpened) {\r\n            this._positionList();\r\n            this._isFocused = true;\r\n            this.onOpen.emit(null);\r\n        } else {\r\n            this.onClose.emit(null);\r\n        }\r\n    }\r\n\r\n    private _close() {\r\n        if (!this._isOpened) {\r\n            return;\r\n        }\r\n\r\n        this._isOpened = false;\r\n        this.onClose.emit(null);\r\n    }\r\n\r\n    private _mouseenter() {\r\n        this._isHovered = true;\r\n    }\r\n\r\n    private _mouseleave() {\r\n        this._isHovered = false;\r\n    }\r\n\r\n    private _select(item: Object, event: any) {\r\n        for (let i = 0; i < this.listElement.nativeElement.children.length; i++) {\r\n            this.listElement.nativeElement.children[i].className = 'eq-combo-box-list__item';\r\n        }\r\n\r\n        event.target.className = event.target.className + ' eq-combo-box-list__item_is-selected';\r\n        this.value = [item];\r\n        this.textElement.nativeElement.value = item[this.itemTextField];\r\n        this.onSelect.emit(item);\r\n        this._close();\r\n    }\r\n\r\n    private _positionList() {\r\n        this.listElement.nativeElement.style.width = this.comboBoxElement.nativeElement.offsetWidth + 'px';\r\n        this.listElement.nativeElement.style.left = this.comboBoxElement.nativeElement.offsetLeft + 'px';\r\n    }\r\n}\r\n"]}