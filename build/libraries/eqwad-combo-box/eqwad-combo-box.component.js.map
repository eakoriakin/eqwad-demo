{"version":3,"sources":["eqwad-combo-box.component.ts"],"names":[],"mappings":"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","file":"eqwad-combo-box.component.js","sourcesContent":["import {Component, Input, Output, ViewChild, Renderer, OnDestroy, EventEmitter} from 'angular2/core';\n\n@Component({\n    selector: 'eq-combo-box',\n    template: `\n        <div class=\"eq-combo-box\" #comboBoxElement\n            [ngClass]=\"{ 'eq-combo-box_is-opened': _isOpened, 'eq-combo-box_is-focused': _isFocused }\"\n            (mouseenter)=\"_mouseenter()\"\n            (mouseleave)=\"_mouseleave()\"\n        >\n            <div class=\"eq-combo-box__wrapper\">\n                <input class=\"eq-combo-box__text\" #textElement\n                    type=\"text\"\n                    autocomplete=\"off\"\n                    [placeholder]=\"placeholder\"\n                    readonly\n                />\n                <div class=\"eq-combo-box__open\" (click)=\"_open()\">\n                    <i class=\"fa fa-caret-down\"></i>\n                </div>\n            </div>\n        </div>\n        <div class=\"eq-combo-box-list\" #listElement\n            [ngClass]=\"{ 'eq-combo-box-list_is-opened': _isOpened, 'eq-combo-box-list_is-focused': _isFocused }\"\n            (mouseenter)=\"_mouseenter()\"\n            (mouseleave)=\"_mouseleave()\"\n        >\n            <div class=\"eq-combo-box-list__item\"\n                *ngFor=\"let item of items\"\n                (click)=\"_select(item, $event)\"\n            >{{item[itemTextField]}}\n            </div>\n        </div>\n    `\n})\n\nexport class EqwadComboBoxComponent implements OnDestroy {\n    @Input() itemValueField: string;\n    @Input() itemTextField: string;\n    @Input() items: Array<Object> = [];\n    @Input() placeholder: string = '';\n\n    @Output() onSelect: EventEmitter<any> = new EventEmitter();\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild('comboBoxElement') private comboBoxElement: any;\n    @ViewChild('listElement') private listElement: any;\n    @ViewChild('textElement') private textElement: any;\n\n    value: Array<Object> = [];\n\n    private _isOpened = false;\n    private _isFocused = false;\n    private _isHovered = false;\n    private _documentClickListener: Function;\n\n    constructor(renderer: Renderer) {\n        this._documentClickListener = renderer.listenGlobal('document', 'click', (event: any) => {\n            // Close list if user clicks outside.\n            if (!this._isHovered && this._isOpened) {\n                this._close();\n            }\n\n            if (!this._isHovered && this._isFocused) {\n                this._isFocused = false;\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        // Remove listeners.\n        this._documentClickListener();\n    }\n\n    open() {\n        this._setListWidth();\n        this._isOpened = true;\n    }\n\n    close() {\n        this._isOpened = false;\n    }\n\n    private _open() {\n        this._isOpened = !this._isOpened;\n\n        if (this._isOpened) {\n            this._setListWidth();\n            this._isFocused = true;\n            this.onOpen.emit(null);\n        } else {\n            this.onClose.emit(null);\n        }\n    }\n\n    private _close() {\n        if (!this._isOpened) {\n            return;\n        }\n\n        this._isOpened = false;\n        this.onClose.emit(null);\n    }\n\n    private _mouseenter() {\n        this._isHovered = true;\n    }\n\n    private _mouseleave() {\n        this._isHovered = false;\n    }\n\n    private _select(item: Object, event: any) {\n        for (let i = 0; i < this.listElement.nativeElement.children.length; i++) {\n            this.listElement.nativeElement.children[i].className = 'eq-combo-box-list__item';\n        }\n\n        event.target.className = event.target.className + ' eq-combo-box-list__item_is-selected';\n        this.value = [item];\n        this.textElement.nativeElement.value = item[this.itemTextField];\n        this.onSelect.emit(item);\n        this._close();\n    }\n\n    private _setListWidth() {\n        // Set list width equal to ComboBox width.\n        this.listElement.nativeElement.style.width = this.comboBoxElement.nativeElement.offsetWidth + 'px';\n    }\n}\n"]}