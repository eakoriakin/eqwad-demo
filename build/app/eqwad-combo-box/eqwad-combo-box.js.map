{"version":3,"sources":["app/eqwad-combo-box/eqwad-combo-box.ts"],"names":[],"mappings":"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","file":"eqwad-combo-box.js","sourcesContent":["import {Component, Input, Output, ViewChild, Renderer, OnDestroy, EventEmitter} from 'angular2/core';\r\n\r\n@Component({\r\n    selector: 'eq-combo-box',\r\n    template: `\r\n        <div class=\"eq-combo-box\" #comboBoxElement\r\n            [ngClass]=\"{ 'eq-combo-box_is-opened': _isOpened, 'eq-combo-box_is-focused': _isFocused }\"\r\n            (mouseenter)=\"_mouseenter()\"\r\n            (mouseleave)=\"_mouseleave()\"\r\n        >\r\n            <div class=\"eq-combo-box__wrapper\">\r\n                <input class=\"eq-combo-box__text\" #textElement\r\n                    type=\"text\"\r\n                    autocomplete=\"off\"\r\n                    [placeholder]=\"placeholder\"\r\n                    readonly\r\n                />\r\n                <div class=\"eq-combo-box__open\" (click)=\"_open()\">\r\n                    <i class=\"fa fa-caret-down\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"eq-combo-box-list\" #listElement\r\n            [ngClass]=\"{ 'eq-combo-box-list_is-opened': _isOpened, 'eq-combo-box-list_is-focused': _isFocused }\"\r\n            (mouseenter)=\"_mouseenter()\"\r\n            (mouseleave)=\"_mouseleave()\"\r\n        >\r\n            <div class=\"eq-combo-box-list__item\"\r\n                *ngFor=\"let item of items\"\r\n                (click)=\"_select(item, $event)\"\r\n            >{{item[itemTextField]}}\r\n            </div>\r\n        </div>\r\n    `\r\n})\r\n\r\nexport class EqwadComboBoxComponent implements OnDestroy {\r\n    @Input() itemValueField: string;\r\n    @Input() itemTextField: string;\r\n    @Input() items: Array<Object> = [];\r\n    @Input() placeholder: string = '';\r\n\r\n    @Output() onSelect: EventEmitter<any> = new EventEmitter();\r\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\r\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ViewChild('comboBoxElement') comboBoxElement: any;\r\n    @ViewChild('listElement') listElement: any;\r\n    @ViewChild('textElement') textElement: any;\r\n\r\n    value: Array<Object> = [];\r\n\r\n    _isOpened = false;\r\n    _isFocused = false;\r\n    _isHovered = false;\r\n    _documentClickListener: Function;\r\n\r\n    constructor(renderer: Renderer) {\r\n        this._documentClickListener = renderer.listenGlobal('document', 'click', (event: any) => {\r\n            // Close list if user clicks outside.\r\n            if (!this._isHovered && this._isOpened) {\r\n                this._close();\r\n            }\r\n\r\n            if (!this._isHovered && this._isFocused) {\r\n                this._isFocused = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        // Remove listeners.\r\n        this._documentClickListener();\r\n    }\r\n\r\n    _open() {\r\n        this._isOpened = !this._isOpened;\r\n\r\n        if (this._isOpened) {\r\n            this._setListWidth();\r\n            this._isFocused = true;\r\n            this.onOpen.emit(null);\r\n        } else {\r\n            this.onClose.emit(null);\r\n        }\r\n    }\r\n\r\n    _close() {\r\n        if (!this._isOpened) {\r\n            return;\r\n        }\r\n\r\n        this._isOpened = false;\r\n        this.onClose.emit(null);\r\n    }\r\n\r\n    _mouseenter() {\r\n        this._isHovered = true;\r\n    }\r\n\r\n    _mouseleave() {\r\n        this._isHovered = false;\r\n    }\r\n\r\n    _select(item: Object, event: any) {\r\n        for (let i = 0; i < this.listElement.nativeElement.children.length; i++) {\r\n            this.listElement.nativeElement.children[i].className = 'eq-combo-box-list__item';\r\n        }\r\n\r\n        event.target.className = event.target.className + ' eq-combo-box-list__item_is-selected';\r\n        this.value = [item];\r\n        this.textElement.nativeElement.value = item[this.itemTextField];\r\n        this.onSelect.emit(item);\r\n        this._close();\r\n    }\r\n\r\n    _setListWidth() {\r\n        // Set list width equal to ComboBox width.\r\n        this.listElement.nativeElement.style.width = this.comboBoxElement.nativeElement.offsetWidth + 'px';\r\n    }\r\n\r\n    open() {\r\n        this._setListWidth();\r\n        this._isOpened = true;\r\n    }\r\n\r\n    close() {\r\n        this._isOpened = false;\r\n    }\r\n}\r\n"]}